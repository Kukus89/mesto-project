(()=>{"use strict";var e=document.querySelector(".profile"),t=e.querySelector(".profile__edite-button"),o=e.querySelector(".profile__add-button"),n=document.querySelector(".popup__profile_name"),r=document.querySelector(".popup__profile_subtitle"),c=document.querySelector(".profile__name"),u=document.querySelector(".profile__subtitle"),p=document.querySelector(".popup__preview-image"),i=document.querySelector(".popup__preview-image-subtitle"),l=document.querySelector(".popup_edite-profile"),a=document.querySelector(".popup_card-add"),s=document.querySelector(".elements__list"),d=document.querySelector(".popup__form_editeProfile"),m=document.querySelector(".popup__form_newCardAdd"),_=document.querySelector(".templateElements").content,f=document.querySelector(".popup_preview"),y=(document.querySelector(".popup__close-button"),document.querySelectorAll(".popup")),v=document.querySelector(".popup__area-name"),q=document.querySelector(".popup__src-image");function S(e,t){var o=_.querySelector(".element").cloneNode(!0),n=o.querySelector(".element__image");return n.src=t,o.querySelector(".element__title").textContent=e,o.querySelector(".element__delete-button").addEventListener("click",k),n.addEventListener("click",(function(){p.alt=e,p.src=t,i.textContent=p.alt,b(f)})),o}function k(e){e.target.closest(".element").remove()}function b(e){e.classList.add("popup_opened")}function g(e){e.classList.remove("popup_opened")}function L(){Array.from(document.querySelectorAll(".input-form")).forEach((function(e){!function(e){var t=Array.from(e.querySelectorAll(".popup__form-input")),o=e.querySelector(".popup__submite-button");E(t,o),t.forEach((function(n){n.addEventListener("input",(function(){!function(e,t){var o,n,r,c;t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("popup__form-input_type_error"),o.textContent="",o.classList.remove("popup__input-error-message_active")}(e,t):(o=e,n=t,r=t.validationMessage,c=o.querySelector(".".concat(n.id,"-error")),n.classList.add("popup__form-input_type_error"),c.textContent=r,c.classList.add("popup__input-error-message_active"))}(e,n),E(t,o)}))}))}(e)}))}function E(e,t){e.some((function(e){return!e.validity.valid}))?(t.disabled=!0,t.classList.add("popup__submite-button_disabled")):(t.disabled=!1,t.classList.remove("popup__submite-button_disabled"))}document.querySelectorAll(".popup__form"),t.addEventListener("click",(function(){n.value=c.textContent,r.value=u.textContent,L(),b(l)})),d.addEventListener("submit",(function(e){e.preventDefault(),c.textContent=n.value,u.textContent=r.value,g(l)})),o.addEventListener("click",(function(){b(a)})),m.addEventListener("submit",(function(e){e.preventDefault(),s.prepend(S(v.value,q.value)),g(a),e.target.reset()})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){s.prepend(S(e.name,e.link))})),s.addEventListener("click",(function(e){e.target.classList.contains("element__like")&&e.target.classList.toggle("element__like_active")})),y.forEach((function(e){e.querySelector(".popup__close-button").addEventListener("click",(function(){g(e)}))})),y.forEach((function(e){document.addEventListener("keydown",(function(t){"Escape"==t.key&&g(e)})),e.addEventListener("click",(function(t){var o=e.querySelector(".popup__form");t.composedPath().includes(o)||g(e)}))})),L()})();